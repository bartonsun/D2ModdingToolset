\subsection{Event conditions}
\subsubsection{Check if all tiles in location have the same terrain (Human)}
\begin{center}
\begin{lstlisting}[language=Lua]
-- You can use lambda functions freely
local forEachTile = function (location, f)
  local pos = location.position
  -- Use integers for tile coordinates
  local halfR = math.floor(location.radius / 2)
  local startX = pos.x - halfR
  local startY = pos.y - halfR
  local endX = pos.x + halfR
  local endY = pos.y + halfR
  
  for x = startX,endX,1 do
    for y = startY,endY,1 do
      f(x, y)
    end
  end
end

local location = scenario:getLocation('S143LO0000')
if not location then
  return false
end

local tilesTotal = location.radius * location.radius
local count = 0

forEachTile(location, function (x, y)
  local tile = scenario:getTile(x, y)
  if not tile then
    return false
  end
  
  if tile.terrain == Terrain.Human then
    count = count + 1
  end
end)

return tilesTotal == count
\end{lstlisting}
\end{center}